name: Conditional Build
on:
  push:
    branches: [ main ]

jobs:
  build:
    name: Build and Upload Artifact
    runs-on: ubuntu-latest

    steps:
      # ✅ 1️⃣ 리포지토리 체크아웃
      - name: Checkout Repository
        uses: actions/checkout@v4

      # ✅ 2️⃣ Quiz 1 - “Building...” 메시지 출력
      - name: Run Build
        run: |
          echo "===== [Quiz 1] 빌드 시작 ====="
          echo "Building..."
          mkdir -p build
          echo "Hello GitHub Actions!" > build/index.html
          echo "빌드 결과물 생성 완료: build/index.html"
          echo "==============================="

      # ✅ 3️⃣ Quiz 2 - 조건 확인용 메시지
      - name: Check Condition
        run: |
          echo "===== [Quiz 2] success() 조건 설명 ====="
          echo "if: \${{ success() }} 는 이전 단계가 모두 성공했을 때 true가 됩니다."
          echo "현재까지 모든 단계가 성공했으므로 이 단계도 실행됩니다."
          echo "======================================="

      # ✅ 4️⃣ 빌드 성공 시 아티팩트 업로드
      - name: Upload Artifact
        if: ${{ success() }}
        uses: actions/upload-artifact@v4
        with:
          name: site-files
          path: build/

      # ✅ 5️⃣ Quiz 3 - 아티팩트 위치 안내
      - name: Display Artifact Info
        if: ${{ success() }}
        run: |
          echo "===== [Quiz 3] 아티팩트 확인 방법 ====="
          echo "1. GitHub → Actions 탭으로 이동"
          echo "2. 해당 워크플로 실행 클릭"
          echo "3. 'Artifacts' 섹션에서 site-files.zip 다운로드 가능"
          echo "======================================"
